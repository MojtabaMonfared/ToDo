{% extends "todos/index.html" %}
{% load static %}

{% block content %}
  
<a href="{% url 'showmode' %}">Switch to show mode</a>
<script type="text/javascript" src="{% static "ckeditor/ckeditor-init.js" %}"></script>
    <script type="text/javascript" src="{% static "ckeditor/ckeditor/ckeditor.js" %}"></script>
    
<form action="" method="post">
    {% csrf_token %}
    {{ form.media }}
    {{ form.as_p }}
    <input type="submit" name="add_task" value="Add new task >">
    
</form>

<table>
    <tr>
        <th>Title</th>
        <th>Priority</th>
        <th>Delete?</th>
        <th>Edit</th>
    </tr>
    {% for task in tasks %}
    <tr>
        <td>
            <a href="{% url 'task-view' task.id %}">
                {{ task.title }}
            </a>
        </td>
        <td>{{ task.priority }}</td>
        <td>
            <form action="" method="post">
                {% csrf_token %}
                <input type="hidden" name="task_id" value="{{ task.id }}">
                <input type="submit" name="delete_task" value="Delete">
            </form>
        </td>
        <td>
            <a href="{% url 'task-edit' task.id %}">Edit</a>
        </td>
    </tr>
    {% endfor %}
</table>

{% endblock content %}